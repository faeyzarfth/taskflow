<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICT Taskflow (Vue Edition)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    <div id="app">
        
        <header>
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">ICT Taskflow</a>
                    <div id="app-nav">
                        <button v-if="user" class="btn btn-danger" @click="handleLogout">Logout</button>
                    </div>
                </div>
            </nav>
        </header>

        <main class="container py-5">
            
            <div v-if="currentView === 'loading'" class="text-center">
                <div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>
            </div>

            <div v-if="currentView === 'login'" class="card shadow-sm auth-card">
                <div class="card-body p-4">
                    <h2 class="card-title text-center mb-4">Login</h2>
                    <div class="mb-3">
                        <input type="email" class="form-control" placeholder="Email" v-model="loginForm.email">
                    </div>
                    <div class="mb-3">
                        <input type="password" class="form-control" placeholder="Password" v-model="loginForm.password">
                    </div>
                    <button class="btn btn-primary w-100" @click="handleLogin">Login</button>
                    <p class="text-center mt-3">
                        Belum punya akun? <a href="#" @click.prevent="currentView = 'register'">Daftar di sini</a>
                    </p>
                </div>
            </div>

            <div v-if="currentView === 'register'" class="card shadow-sm auth-card">
                <div class="card-body p-4">
                    <h2 class="card-title text-center mb-4">Daftar Akun Baru</h2>
                    <div class="mb-3"><input type="text" class="form-control" placeholder="Nama Lengkap" v-model="registerForm.name"></div>
                    <div class="mb-3"><input type="email" class="form-control" placeholder="Email" v-model="registerForm.email"></div>
                    <div class="mb-3"><input type="password" class="form-control" placeholder="Password" v-model="registerForm.password"></div>
                    <div class="mb-3">
                        <select class="form-select" v-model="registerForm.role">
                            <option value="" disabled>Pilih Peran Anda</option>
                            <option value="Guru">Guru</option>
                            <option value="Siswa">Siswa</option>
                        </select>
                    </div>
                    <button class="btn btn-primary w-100" @click="handleRegister">Daftar</button>
                    <p class="text-center mt-3">
                        Sudah punya akun? <a href="#" @click.prevent="currentView = 'login'">Login di sini</a>
                    </p>
                </div>
            </div>

            <div v-if="currentView === 'teacherDashboard'">
                <h2>Selamat datang, {{ user.profile.name }}!</h2>
                <p>Ini adalah Dasbor Guru.</p>
            </div>

            <div v-if="currentView === 'studentDashboard'">
                <h2>Selamat datang, {{ user.profile.name }}!</h2>
                <p>Ini adalah Dasbor Siswa.</p>
            </div>

        </main>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = { /* ... Konfigurasi Firebase Anda ... */ };
        firebase.initializeApp(firebaseConfig);
    </script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/app.js" defer></script>
</body>
</html>